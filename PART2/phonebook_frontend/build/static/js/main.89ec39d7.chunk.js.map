{"version":3,"sources":["services/phonebook.js","App.js","index.js"],"names":["baseUrl","phonebook","axios","get","then","response","data","newObject","post","id","delete","concat","put","PersonForm","_ref","newName","newNumber","addNewPerson","handleNameChange","handleNumberChange","react_default","a","createElement","onSubmit","value","onChange","type","Filter","_ref2","filterName","handleFilterNameChange","Person","_ref3","person","handleClick","name","number","App_Button","text","onClick","Button","_ref4","Persons","_ref5","persons","map","App_Person","key","Notification","_ref6","message","isError","className","App","_useState","useState","_useState2","Object","slicedToArray","setNewName","_useState3","_useState4","setNewNumber","_useState5","_useState6","setFilterName","_useState7","_useState8","setPersons","_useState9","_useState10","notificationMessage","setNotificationMessage","_useState11","_useState12","setIsError","useEffect","console","log","phonebookService","initialPersons","filteredPersonsArray","filter","toLowerCase","includes","App_Notification","App_Filter","event","target","App_PersonForm","preventDefault","length","window","confirm","registeredPerson","find","updatedRegisteredPerson","objectSpread","returnedPerson","setTimeout","catch","error","App_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.89ec39d7.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteID = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, deleteID, update } \r\n\r\n\r\n\r\n\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport phonebookService from './services/phonebook'\r\n\r\n/* feedback \r\n1. css should be DRY \r\n2. 1 state for notification, not 2 states \r\n*/\r\n\r\nconst PersonForm = ({ newName, newNumber, addNewPerson, handleNameChange, handleNumberChange }) => {\r\n  return (\r\n    <form onSubmit={addNewPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst Filter = ({filterName, handleFilterNameChange}) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={filterName} onChange={handleFilterNameChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Person = ({ person, handleClick }) => (\r\n  <div>\r\n    <span> {person.name} {person.number} </span>\r\n    <Button text=\"delete\" onClick={() => handleClick(person.id, person.name)}/>\r\n  </div>\r\n)\r\n\r\nconst Button = ({text, onClick}) => {\r\n  return (\r\n  <button onClick={onClick}>{text}</button>\r\n  )\r\n}\r\n\r\n\r\nconst Persons = ({persons, handleClick}) => {\r\n  const personsList = persons.map(person => <Person key={person.id} person={person} handleClick={handleClick}/>)\r\n  return (\r\n    personsList\r\n  )\r\n}\r\n\r\nconst Notification = ({ message, isError }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={isError? \"errorNotification\" : \"successfulNotification\"}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filterName, setFilterName ] = useState('')\r\n  const [ persons, setPersons ] = useState([])\r\n  const [notificationMessage, setNotificationMessage] = useState(null)\r\n  const [isError, setIsError] = useState(false)\r\n\r\n  // ONLY RUNS ONCE \r\n  useEffect(() => {\r\n    console.log('effect')\r\n    phonebookService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  },[])\r\n\r\n  console.log('rendered App')\r\n\r\n  const addNewPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    const userExists = (persons.filter(a => a.name === newName)).length > 0\r\n    if (userExists) {\r\n      const isUserUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one ?`)\r\n      if (isUserUpdate) {\r\n      const registeredPerson = persons.find(person => person.name === newName)\r\n      const updatedRegisteredPerson = { ...registeredPerson, number: newNumber }\r\n      phonebookService\r\n        .update(registeredPerson.id, updatedRegisteredPerson)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.map(person => person.id !== returnedPerson.id ? person : updatedRegisteredPerson))\r\n          setNotificationMessage(`Changed number of ${returnedPerson.name}`)\r\n\r\n          setTimeout(() => {\r\n            setNotificationMessage(null)\r\n          }, 3000)\r\n        })\r\n        .catch(error => {\r\n          setIsError(true)\r\n\r\n          setNotificationMessage(`Information of ${registeredPerson.name} has already been removed from server`)\r\n\r\n          setPersons(persons.filter(person => person.name !== registeredPerson.name))\r\n\r\n          setTimeout(() => {\r\n            setNotificationMessage(null);\r\n            setIsError(false)\r\n          }, 3000)\r\n\r\n      })\r\n      }\r\n    } else {\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n      phonebookService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNotificationMessage(`Added ${returnedPerson.name}`)\r\n\r\n          setTimeout(() => {\r\n            setNotificationMessage(null)\r\n          }, 3000)\r\n        })\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')  \r\n  }\r\n  \r\n  const handleNameChange= (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterNameChange = (event) => {\r\n    setFilterName(event.target.value.toLowerCase())\r\n  }\r\n  \r\n  const handleClick = (id, name) => {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      phonebookService\r\n        .deleteID(id)\r\n        .then(() => {\r\n          setPersons(persons.filter(person => id !== person.id))\r\n          setNotificationMessage(`Deleted ${name}`)\r\n\r\n          setTimeout(() => {\r\n            setNotificationMessage(null)\r\n          }, 3000)\r\n        })\r\n    } else {console.log('no state update')}\r\n  }\r\n\r\n  const filteredPersonsArray = persons.filter(person => person.name.toLowerCase().includes(filterName.toLowerCase()))\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notification message={notificationMessage} isError={isError}/>\r\n\r\n      <Filter filterName={filterName} handleFilterNameChange={handleFilterNameChange} />\r\n      \r\n      <h3>add a new</h3>\r\n\r\n      <PersonForm newName={newName} newNumber={newNumber} addNewPerson={addNewPerson} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange}/>\r\n      \r\n      <h3>Numbers</h3>\r\n\r\n      <Persons persons={filteredPersonsArray} handleClick={handleClick} />\r\n\r\n      <br /><br /><div>debug: newName state is : {newName}</div>\r\n      <div>debug: newNumber state is : {newNumber}</div>\r\n      <div>debug: filterName state is : {filterName}</div>\r\n\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))\r\n\r\n"],"sourceRoot":""}